<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="ru"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MenuTracker.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">chapter_002</a> &gt; <a href="index.source.html" class="el_package">ru.job4j.tracker2.start</a> &gt; <span class="el_source">MenuTracker.java</span></div><h1>MenuTracker.java</h1><pre class="source lang-java linenums">package ru.job4j.tracker2.start;

import ru.job4j.tracker2.models.*;

import java.util.ArrayList;

class EditItem extends BaseAction implements UserAction {
	public EditItem(int key, String name) {
<span class="fc" id="L9">		super(key, name);</span>
<span class="fc" id="L10">	}</span>
	
	public void execute(InputSecond input, TrackerSecond tracker) {
<span class="nc" id="L13">		tracker.update(new TaskSecond(input.ask(&quot;Please, enter the task's id.&quot;), input.ask(&quot;Enter new name.&quot;), input.ask(&quot;Enter new description.&quot;)));</span>
<span class="nc" id="L14">		System.out.println(&quot;New Item added.&quot;);</span>
<span class="nc" id="L15">	}</span>
}

class DeleteItem extends BaseAction implements UserAction {
	public DeleteItem(int key, String name) {
<span class="fc" id="L20">		super(key, name);</span>
<span class="fc" id="L21">	}	</span>
	public void execute(InputSecond input, TrackerSecond tracker) {
<span class="nc" id="L23">		tracker.delete(input.ask(&quot;Please, enter the task's id.&quot;));</span>
<span class="nc" id="L24">		System.out.println(&quot;This task has been deleted&quot;);</span>
<span class="nc" id="L25">	}</span>
}

public class MenuTracker {
	private InputSecond input;
	private TrackerSecond tracker;
<span class="fc" id="L31">	private UserAction[] actions = new UserAction[8];</span>
<span class="fc" id="L32">	private int position = 0;</span>
	
<span class="fc" id="L34">	public MenuTracker(InputSecond input, TrackerSecond tracker) {</span>
<span class="fc" id="L35">		this.input = input;</span>
<span class="fc" id="L36">		this.tracker = tracker;</span>
<span class="fc" id="L37">	}</span>
	
	public void fillActions() {
<span class="fc" id="L40">		this.actions[position++] = this.new AddItem(1, &quot;Add new Item.&quot;); // Внутренний класс</span>
<span class="fc" id="L41">		this.actions[position++] = new MenuTracker.ShowItems(2, &quot;Show all items.&quot;); // Внутренний статичный класс</span>
<span class="fc" id="L42">		this.actions[position++] = new EditItem(3, &quot;Edit item.&quot;); // &quot;Внутренний внешний класс&quot;</span>
<span class="fc" id="L43">		this.actions[position++] = new DeleteItem(4, &quot;Delete item.&quot;);  // &quot;Внутренний внешний класс&quot;</span>
<span class="fc" id="L44">		this.actions[position++] = this.new FindById(5, &quot;Find item by Id.&quot;); // Внутренний класс</span>
<span class="fc" id="L45">		this.actions[position++] = new MenuTracker.FindByName(6, &quot;Find items by name.&quot;); // Внутренний статичный класс</span>
<span class="fc" id="L46">	}</span>
	
	public void addAction(UserAction userAction) { // метод для профилактического использования анонимного класса
<span class="fc" id="L49">		this.actions[position++] = userAction; </span>
<span class="fc" id="L50">	}</span>
	
    public void select(int key) {
<span class="fc bfc" id="L53" title="All 2 branches covered.">        if (key == 0) {</span>
<span class="fc" id="L54">         this.actions[7].execute(this.input, this.tracker);</span>
        } else {
<span class="fc" id="L56">            this.actions[key - 1].execute(this.input, this.tracker);</span>
        }
<span class="fc" id="L58">    }</span>
	
	public void show() {
<span class="fc bfc" id="L61" title="All 2 branches covered.">		for (UserAction action : this.actions) {</span>
<span class="pc bpc" id="L62" title="1 of 2 branches missed.">			if (action != null) {</span>
<span class="fc" id="L63">			System.out.println(action.info());</span>
			}
		}
<span class="fc" id="L66">	}</span>
	
	private class AddItem extends BaseAction implements UserAction {
<span class="fc" id="L69">		public AddItem(int key, String name) {</span>
<span class="fc" id="L70">			super(key, name);</span>
<span class="fc" id="L71">		}</span>
		
	public void execute(InputSecond input, TrackerSecond tracker) {
<span class="fc" id="L74">		tracker.add(new ItemSecond(input.ask(&quot;Enter new Task's name.&quot;), input.ask(&quot;Enter new Task's description.&quot;)));</span>
<span class="fc" id="L75">		System.out.println(&quot;New Item added.&quot;);</span>
<span class="fc" id="L76">		}</span>
	}
	
	private class FindById extends BaseAction implements UserAction {
<span class="fc" id="L80">		public FindById(int key, String name) {</span>
<span class="fc" id="L81">			super(key, name);</span>
<span class="fc" id="L82">		}</span>
		public void execute(InputSecond input, TrackerSecond tracker) {
<span class="nc" id="L84">			ItemSecond it = tracker.findById(input.ask(&quot;Please, enter the task's id.&quot;));</span>
<span class="nc" id="L85">			System.out.printf(&quot;Task's number - %s:\n Task's name - \&quot;%s\&quot;,\n Task's description \&quot;%s\&quot;.\n&quot;, it.getId(), it.getName(), it.getDescription());			</span>
<span class="nc" id="L86">		}	</span>
	}
	
	private static class FindByName extends BaseAction implements UserAction {
		public FindByName(int key, String name) {
<span class="fc" id="L91">			super(key, name);</span>
<span class="fc" id="L92">		}</span>
		public void execute(InputSecond input, TrackerSecond tracker) {
<span class="nc" id="L94">			int count = 0;</span>
<span class="nc" id="L95">			ArrayList&lt;ItemSecond&gt; its = tracker.findByName(input.ask(&quot;Please, enter the task's name.&quot;));</span>
<span class="nc" id="L96">			System.out.println(&quot;Task's founded:&quot;);</span>
<span class="nc bnc" id="L97" title="All 2 branches missed.">			for (ItemSecond item : its) {</span>
<span class="nc" id="L98">				count++;</span>
<span class="nc" id="L99">				System.out.printf(&quot;%d.\n Task's number %s:\n Task's description - \&quot;%s\&quot;.\n&quot;, count, item.getId(), item.getDescription());</span>
<span class="nc" id="L100">			}</span>
<span class="nc" id="L101">		}</span>
	}
	
	private static class ShowItems extends BaseAction implements UserAction {
		public ShowItems(int key, String name) {
<span class="fc" id="L106">			super(key, name);</span>
<span class="fc" id="L107">		}</span>
		public void execute(InputSecond input, TrackerSecond tracker) {
<span class="nc bnc" id="L109" title="All 2 branches missed.">			for (ItemSecond item : tracker.getAll()) {</span>
<span class="nc" id="L110">				System.out.println(String.format(&quot;%s. %s&quot;, item.getId(), item.getName()));</span>
<span class="nc" id="L111">			}</span>
<span class="nc" id="L112">		}</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.9.201702052155</span></div></body></html>